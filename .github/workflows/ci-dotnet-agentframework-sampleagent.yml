# Copyright (c) Microsoft Corporation.
# Licensed under the MIT License.

name: CI - Build .NET Agent Framework Sample Agent
permissions:
  contents: read

on:
  workflow_call:  # Called by orchestrator
  workflow_dispatch:  # Manual trigger

jobs:
  dotnet-agentframework-sampleagent:
    name: .NET Agent Framework Sample Agent
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./dotnet/agent-framework

    strategy:
      matrix:
        dotnet-version: ['8.0.x']

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Setup .NET ${{ matrix.dotnet-version }}
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: ${{ matrix.dotnet-version }}

    - name: Restore dependencies
      run: dotnet restore AgentFrameworkSample.sln

    - name: Build solution
      run: dotnet build AgentFrameworkSample.sln --no-restore --configuration Release
